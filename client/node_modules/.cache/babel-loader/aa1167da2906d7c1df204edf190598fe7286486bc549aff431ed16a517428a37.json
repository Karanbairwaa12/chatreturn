{"ast":null,"code":"var _jsxFileName = \"/media/deeporian/36466FC6466F8609/libraryFolder/library-master/chatapplication/client/src/component/chatpage/ChatPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport '../../pages/auth.css';\nimport './chatpage.css';\nimport WhatsAppIcon from '@mui/icons-material/WhatsApp';\nimport GroupsIcon from '@mui/icons-material/Groups';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport SearchIcon from '@mui/icons-material/Search';\nimport axios from 'axios';\nimport MyChat from '../mychat/MyChat';\nimport io from 'socket.io-client';\n// import { set } from 'mongoose';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:9001\");\nconst ChatPage = ({\n  userData,\n  handleLogout\n}) => {\n  _s();\n  const [dropDown, setdropDown] = useState(false);\n  const [search, setSearch] = useState(localStorage.getItem('search') || '');\n  const [searchResult, setSearchResult] = useState([]);\n  const [error, setError] = useState(null);\n  const [loding, setLoding] = useState();\n  const [selectedChat, setSelectedChat] = useState([]);\n  const [otherUser, setOtherUser] = useState([]);\n  const [personChat, setPersonChat] = useState(localStorage.getItem('personChat') === 'true' || false // Retrieve from localStorage\n  );\n\n  const [withoutSaerchRslt, setWithoutSearchRslt] = useState([]);\n  const [newchat, setNewChat] = useState([]);\n  const [profileCheck, setProfileCheck] = useState(false);\n  const [logedUserProfilecheck, setLogedUserProfilecheck] = useState(false);\n  // console.log(\"first\",userData)\n\n  const handleProfile = () => {\n    setProfileCheck(true);\n  };\n  const handleLogedProfile = () => {\n    setLogedUserProfilecheck(false);\n    setdropDown(false);\n  };\n  const handleSearchKeyPress = e => {\n    if (e.key === 'Enter' && search.trim() !== \"\") {\n      // Check if search is not empty\n      handleUsers();\n      // console.log(\"search\", search);\n    } else {\n      setSearchResult([]);\n    }\n  };\n  const handleUsers = async () => {\n    if (!search) {\n      // console.log(search)\n      setSearch('');\n      localStorage.removeItem('search'); // Clear search from localStorage\n      return; // Return early if search is empty\n    }\n\n    try {\n      console.log(\"accessToken\", userData.accessToken);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${userData.accessToken}`\n        }\n      };\n      setLoding(true);\n      console.log(\"this is the data I want to fetch\");\n      const {\n        data\n      } = await axios.get(`http://localhost:8080/user?search=${search}`, config);\n      // console.log(\"data\")\n      // console.log(\"data\",data)\n      setLoding(false);\n      setSearchResult(data);\n      localStorage.setItem('search', search);\n    } catch (err) {\n      console.error('Error during login:', err);\n      setError('An error occurred during login.');\n    }\n  };\n  // console.log(\"userData\", userData)\n\n  const joinRoom = chat => {\n    console.log(\"join room\", chat._id);\n    if (chat._id !== \"\") {\n      socket.emit(\"join_room\", chat._id);\n    }\n  };\n  const accessChat = async userId => {\n    console.log(\"this is userId\", userId);\n    // console.log(chats)\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${userData.accessToken}`\n        }\n      };\n      console.log(userData.accessToken);\n\n      // Check if the chat with the given user already exists in chats\n      const existingChat = newchat.find(chat => chat.users.some(user => user._id === userId));\n      console.log(\"existingChat\", existingChat);\n      if (!existingChat) {\n        // If the chat doesn't exist, create a new one\n        const {\n          data\n        } = await axios.post(\"http://localhost:8080/chat/one\", {\n          userId\n        }, config);\n        console.log(\"chats data:\", data);\n        setNewChat([...newchat, data]);\n        setSelectedChat(data); // Set the new chat as the selected chat\n        const namiUser = data.users.find(user => user._id === userId);\n        if (namiUser) {\n          setOtherUser(namiUser);\n          console.log(\"Nami's data:\", namiUser);\n        } else {\n          console.log(\"Nami not found in the users array.\");\n        }\n      } else {\n        // If the chat already exists, set it as the selected chat\n        setSelectedChat(existingChat);\n        const namiUser = existingChat.users.find(user => user._id === userId);\n        if (namiUser) {\n          setOtherUser(namiUser);\n          console.log(\"Nami's data:\", namiUser);\n        } else {\n          console.log(\"Nami not found in the users array.\");\n        }\n      }\n\n      // Set personChat to true only when a chat is selected\n      setPersonChat(true);\n    } catch (err) {\n      console.error('Error during login:', err);\n      setError('An error occurred');\n\n      // Reset personChat to false when an error occurs\n      setPersonChat(false);\n    }\n  };\n  useEffect(() => {\n    console.log(\"selected chat\", selectedChat);\n    console.log(\"ussop user\", otherUser);\n    joinRoom(selectedChat);\n  }, [selectedChat]);\n  useEffect(() => {\n    // if (!search) {\n    //   console.log(search)\n    //   setSearch('');\n    //   localStorage.removeItem('search'); // Clear search from localStorage\n    //   return; // Return early if search is empty\n    // }\n    // console.log(\"useEffect\", search)\n    handleUsers();\n  }, [search]);\n  useEffect(() => {\n    // Store the personChat state in localStorage\n    localStorage.setItem('personChat', JSON.stringify(personChat));\n  }, [personChat]);\n  useEffect(() => {\n    // Check if personChat state exists in localStorage\n    const storedPersonChat = localStorage.getItem('personChat');\n    console.log(\"storePersonChat\", storedPersonChat);\n    if (storedPersonChat) {\n      // Parse and set the personChat state from localStorage\n      setPersonChat(JSON.parse(storedPersonChat));\n    }\n  }, [personChat]);\n\n  // useEffect(() => {\n  //   console.log(\"hi this is without dependency\")\n  //   if (!search) {\n  //     console.log(\"in useeffect\")\n  //     // Fetch chats with last messages when no search query is entered\n  //     const fetchChatsWithLastMessages = async () => {\n  //       try {\n  //         const config = {\n  //           headers: {\n  //             Authorization: `Bearer ${userData.accessToken}`,\n  //           },\n  //         };\n  //     const { data } = await axios.get('http://localhost:8080/chat/one', config);\n  //     console.log(\"in use data\",data)\n  //     // Filter chats with last messages\n  //     const chatsWithLastMessages = data.filter((chat) => chat.latestMessage);\n  //     const usersNotMatchingId = chatsWithLastMessages.flatMap((chat) =>\n  //       chat.users.filter((user) => user._id !== userData.other._id)\n  //     );\n  //     console.log(\"usersNotMatchingId\",usersNotMatchingId)\n  //     setWithoutSearchRslt(usersNotMatchingId);\n  //   } catch (err) {\n  //     console.error('Error fetching chats with last messages:', err);\n  //     setError('An error occurred while fetching chats.');\n  //   }\n  // };\n\n  //     fetchChatsWithLastMessages();\n  //   }\n  // }, [search, userData.accessToken]);\n  useEffect(() => {\n    if (!search) {\n      const fetchChatsWithLastMessages = async () => {\n        try {\n          const config = {\n            headers: {\n              Authorization: `Bearer ${userData.accessToken}`\n            }\n          };\n\n          // Fetch chat data\n          const chatResponse = await axios.get('http://localhost:8080/chat/one', config);\n          const chatData = chatResponse.data;\n          // console.log(\"chatData from chat Response\",chatData)\n          // Initialize an array to store chats with last messages\n          const chatsWithLastMessages = [];\n\n          // Loop through each chat\n          for (const chat of chatData) {\n            // Construct the URL for messages in the chat\n            const chatMessagesUrl = `http://localhost:8080/message/${chat._id}`;\n\n            // Fetch message data for the chat\n            const messageResponse = await axios.get(chatMessagesUrl, config);\n            console.log(`this is messageResponse`, messageResponse);\n            const messageData = messageResponse.data;\n            console.log(\"this is messageData\", messageData);\n            // console.log(\"this is messageData\",messageData)\n            // Check if there are messages in the chat\n            if (messageData.length > 0) {\n              // Add the chat to the array if it has messages\n              chatsWithLastMessages.push(chat);\n            }\n          }\n          console.log(\"this is chat with last messages:\", chatsWithLastMessages);\n          const usersNotMatchingId = chatsWithLastMessages.flatMap(chat => chat.users.filter(user => user._id !== userData.other._id));\n          // Set the chats with last messages in the state\n          setWithoutSearchRslt(usersNotMatchingId);\n        } catch (error) {\n          console.error('Error fetching chats with last messages:', error);\n          setError('An error occurred while fetching chats.');\n        }\n      };\n\n      // Call the function to fetch chats with last messages\n      fetchChatsWithLastMessages();\n    }\n  }, [search, userData.accessToken, setWithoutSearchRslt]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatpage\",\n    children: [profileCheck && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkUserProfile\",\n      onClick: () => setProfileCheck(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkUserProfileContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfilePic\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: otherUser.pic,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfileName\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: otherUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfileEmail\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: otherUser.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this), logedUserProfilecheck && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkUserProfile\",\n      onClick: handleLogedProfile,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkUserProfileContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfilePic\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: userData.other.pic,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfileName\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: userData.other.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkUserProfileEmail\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: userData.other.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-right\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-container-navbar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"nav-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav-profile-pic\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: userData.other.pic,\n                    alt: \"default\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-others\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"group-icons\",\n                  children: [/*#__PURE__*/_jsxDEV(GroupsIcon, {\n                    className: \"grpicons\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(MoreVertIcon, {\n                    className: \"grpicons\",\n                    onClick: () => setdropDown(!dropDown)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 21\n                  }, this), dropDown && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"dropdown\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dropBtn\",\n                      onClick: () => setLogedUserProfilecheck(true),\n                      children: \"My Profile\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dropBtn\",\n                      onClick: () => handleLogout(personChat, setPersonChat),\n                      children: \"Log out\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 316,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-search-box\",\n            children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error-message\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-container\",\n              children: [/*#__PURE__*/_jsxDEV(SearchIcon, {\n                className: \"search-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: search,\n                onChange: e => setSearch(e.target.value),\n                onKeyPress: handleSearchKeyPress\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"search-user-button\",\n                onClick: handleUsers,\n                children: \"Go\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-container-user-list\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"list-container\",\n              children: [console.log(\"withoutSaerchRslt\", withoutSaerchRslt), loding ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Loding\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-list-container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"user-list-item\",\n                  children: !search ? withoutSaerchRslt.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"user-item\",\n                    onClick: () => accessChat(item._id),\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"user-item-profile\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"item-profile-pic\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: item.pic,\n                          alt: \"default\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 353,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 352,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 351,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"user-item-data\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"user-item-identity\",\n                        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                          children: item.username\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 358,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 357,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"lattest-msg\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: \"you: this is you messages\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 362,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 361,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 33\n                    }, this)]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 33\n                  }, this)) : searchResult.map((item, i) => {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"user-item\",\n                        onClick: () => accessChat(item._id),\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"user-item-profile\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"item-profile-pic\",\n                            children: /*#__PURE__*/_jsxDEV(\"img\", {\n                              src: item.pic,\n                              alt: \"default\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 373,\n                              columnNumber: 39\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 372,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 371,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"user-item-data\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"user-item-identity\",\n                            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                              children: item.username\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 378,\n                              columnNumber: 39\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 377,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"lattest-msg\",\n                            children: /*#__PURE__*/_jsxDEV(\"p\", {\n                              children: \"you: this is you messages\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 381,\n                              columnNumber: 39\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 380,\n                            columnNumber: 37\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 376,\n                          columnNumber: 35\n                        }, this)]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 370,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container-left\",\n        children: personChat ? /*#__PURE__*/_jsxDEV(MyChat, {\n          userData: userData,\n          selectedChat: selectedChat,\n          setSelectedChat: setSelectedChat,\n          socket: socket,\n          chatId: selectedChat._id,\n          user: otherUser,\n          handleProfile: handleProfile,\n          profileCheck: profileCheck\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"whatsapp-home\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"home-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"home-container-box\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"home-container-icon\",\n                children: /*#__PURE__*/_jsxDEV(WhatsAppIcon, {\n                  className: \"icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"home-container-para\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"WhatsApp Web\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"home-whatsapp-title\",\n                  children: [\"Send and receive messages without keeping your phone online.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 120\n                  }, this), \"Use WhatsApp on up to 4 linked devices and 1 phone at the same time.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPage, \"j4tZSu9OFb44jeenxxwZH9vxXUE=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useEffect","useState","WhatsAppIcon","GroupsIcon","MoreVertIcon","SearchIcon","axios","MyChat","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","connect","ChatPage","userData","handleLogout","_s","dropDown","setdropDown","search","setSearch","localStorage","getItem","searchResult","setSearchResult","error","setError","loding","setLoding","selectedChat","setSelectedChat","otherUser","setOtherUser","personChat","setPersonChat","withoutSaerchRslt","setWithoutSearchRslt","newchat","setNewChat","profileCheck","setProfileCheck","logedUserProfilecheck","setLogedUserProfilecheck","handleProfile","handleLogedProfile","handleSearchKeyPress","e","key","trim","handleUsers","removeItem","console","log","accessToken","config","headers","Authorization","data","get","setItem","err","joinRoom","chat","_id","emit","accessChat","userId","existingChat","find","users","some","user","post","namiUser","JSON","stringify","storedPersonChat","parse","fetchChatsWithLastMessages","chatResponse","chatData","chatsWithLastMessages","chatMessagesUrl","messageResponse","messageData","length","push","usersNotMatchingId","flatMap","filter","other","className","children","onClick","src","pic","alt","fileName","_jsxFileName","lineNumber","columnNumber","username","email","type","value","onChange","target","onKeyPress","map","item","i","chatId","_c","$RefreshReg$"],"sources":["/media/deeporian/36466FC6466F8609/libraryFolder/library-master/chatapplication/client/src/component/chatpage/ChatPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../pages/auth.css'\nimport './chatpage.css'\nimport WhatsAppIcon from '@mui/icons-material/WhatsApp';\nimport GroupsIcon from '@mui/icons-material/Groups';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport SearchIcon from '@mui/icons-material/Search';\nimport axios from 'axios';\nimport MyChat from '../mychat/MyChat';\n\nimport io from 'socket.io-client'\n// import { set } from 'mongoose';\n\nconst socket = io.connect(\"http://localhost:9001\")\nconst ChatPage = ({userData,handleLogout}) => {\n\n  const [dropDown, setdropDown] = useState(false)\n  const [search, setSearch] = useState(localStorage.getItem('search') || '');\n  const [searchResult,setSearchResult] = useState([])\n  const [error, setError] = useState(null); \n  const [loding, setLoding] = useState()\n  const [selectedChat, setSelectedChat] = useState([])\n  const [otherUser, setOtherUser] = useState([])\n  const [personChat, setPersonChat] = useState(\n    localStorage.getItem('personChat') === 'true' || false // Retrieve from localStorage\n  );\n  const [withoutSaerchRslt, setWithoutSearchRslt] = useState([])\n  const [newchat, setNewChat] = useState([])\n  const [profileCheck, setProfileCheck] = useState(false)\n  const [logedUserProfilecheck,setLogedUserProfilecheck] = useState(false)\n  // console.log(\"first\",userData)\n\n  const handleProfile = () => {\n    setProfileCheck(true)\n  }\n\n  const handleLogedProfile =()=> {\n    setLogedUserProfilecheck(false)\n    setdropDown(false)\n  }\n  const handleSearchKeyPress = (e) => {\n    if (e.key === 'Enter' && search.trim() !== \"\") { // Check if search is not empty\n      handleUsers();\n      // console.log(\"search\", search);\n    }else {\n      setSearchResult([])\n    }\n  };\n  const handleUsers = async () => {\n    if (!search) {\n      // console.log(search)\n      setSearch('');\n      localStorage.removeItem('search'); // Clear search from localStorage\n      return; // Return early if search is empty\n    }\n\n    try {\n      console.log(\"accessToken\",userData.accessToken)\n      const config = {\n          headers: {\n            Authorization :`Bearer ${userData.accessToken}`\n          }\n      }\n      setLoding(true)\n      console.log(\"this is the data I want to fetch\")\n      const {data} = await axios.get(`http://localhost:8080/user?search=${search}`,config)\n      // console.log(\"data\")\n      // console.log(\"data\",data)\n      setLoding(false)\n      setSearchResult(data)\n      localStorage.setItem('search', search);\n    }catch(err) {\n      console.error('Error during login:', err);\n      setError('An error occurred during login.');\n    }\n  }\n  // console.log(\"userData\", userData)\n  \n  const joinRoom =(chat)=> {\n    console.log(\"join room\",chat._id)\n    if(chat._id !== \"\") {\n      socket.emit(\"join_room\",chat._id)\n    }\n    \n  }\n  const accessChat = async (userId) => {\n    console.log(\"this is userId\", userId);\n    // console.log(chats)\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${userData.accessToken}`,\n        },\n      };\n      console.log(userData.accessToken);\n  \n      // Check if the chat with the given user already exists in chats\n      const existingChat = newchat.find((chat) =>chat.users.some((user) => user._id === userId));\n      \n      console.log(\"existingChat\", existingChat);\n      if (!existingChat) {\n        // If the chat doesn't exist, create a new one\n        const { data } = await axios.post(\"http://localhost:8080/chat/one\", { userId }, config);\n        console.log(\"chats data:\", data)\n       \n        setNewChat([...newchat,data])\n        \n        setSelectedChat(data);// Set the new chat as the selected chat\n        const namiUser = data.users.find(user => user._id === userId);\n\n        if (namiUser) {\n            setOtherUser(namiUser)\n            console.log(\"Nami's data:\", namiUser);\n        } else {\n            console.log(\"Nami not found in the users array.\");\n        }\n      } else {\n        // If the chat already exists, set it as the selected chat\n        setSelectedChat(existingChat);\n        const namiUser = existingChat.users.find(user => user._id === userId);\n\n        if (namiUser) {\n            setOtherUser(namiUser)\n            console.log(\"Nami's data:\", namiUser);\n        } else {\n            console.log(\"Nami not found in the users array.\");\n        }\n      }\n  \n      // Set personChat to true only when a chat is selected\n      setPersonChat(true);\n  \n      \n    } catch (err) {\n      console.error('Error during login:', err);\n      setError('An error occurred');\n  \n      // Reset personChat to false when an error occurs\n      setPersonChat(false);\n    }\n  };\n  useEffect(() => {\n    console.log(\"selected chat\", selectedChat);\n    console.log(\"ussop user\", otherUser)\n    joinRoom(selectedChat)\n  }, [selectedChat]);\n  \n  useEffect(() => {\n    // if (!search) {\n    //   console.log(search)\n    //   setSearch('');\n    //   localStorage.removeItem('search'); // Clear search from localStorage\n    //   return; // Return early if search is empty\n    // }\n    // console.log(\"useEffect\", search)\n   handleUsers()\n  }, [search]);\n\n  useEffect(() => {\n    // Store the personChat state in localStorage\n    localStorage.setItem('personChat', JSON.stringify(personChat));\n  }, [personChat]);\n\n  useEffect(() => {\n    // Check if personChat state exists in localStorage\n    const storedPersonChat = localStorage.getItem('personChat');\n    console.log(\"storePersonChat\",storedPersonChat)\n    if (storedPersonChat) {\n      // Parse and set the personChat state from localStorage\n      setPersonChat(JSON.parse(storedPersonChat));\n    }\n  }, [personChat]);\n\n  // useEffect(() => {\n  //   console.log(\"hi this is without dependency\")\n  //   if (!search) {\n  //     console.log(\"in useeffect\")\n  //     // Fetch chats with last messages when no search query is entered\n  //     const fetchChatsWithLastMessages = async () => {\n  //       try {\n  //         const config = {\n  //           headers: {\n  //             Authorization: `Bearer ${userData.accessToken}`,\n  //           },\n  //         };\n      //     const { data } = await axios.get('http://localhost:8080/chat/one', config);\n      //     console.log(\"in use data\",data)\n      //     // Filter chats with last messages\n      //     const chatsWithLastMessages = data.filter((chat) => chat.latestMessage);\n      //     const usersNotMatchingId = chatsWithLastMessages.flatMap((chat) =>\n      //       chat.users.filter((user) => user._id !== userData.other._id)\n      //     );\n      //     console.log(\"usersNotMatchingId\",usersNotMatchingId)\n      //     setWithoutSearchRslt(usersNotMatchingId);\n      //   } catch (err) {\n      //     console.error('Error fetching chats with last messages:', err);\n      //     setError('An error occurred while fetching chats.');\n      //   }\n      // };\n\n  //     fetchChatsWithLastMessages();\n  //   }\n  // }, [search, userData.accessToken]);\n  useEffect(() => {\n    if (!search) {\n      const fetchChatsWithLastMessages = async () => {\n        try {\n          const config = {\n            headers: {\n              Authorization: `Bearer ${userData.accessToken}`,\n            },\n          };\n  \n          // Fetch chat data\n          const chatResponse = await axios.get('http://localhost:8080/chat/one', config);\n          const chatData = chatResponse.data;\n          // console.log(\"chatData from chat Response\",chatData)\n          // Initialize an array to store chats with last messages\n          const chatsWithLastMessages = [];\n  \n          // Loop through each chat\n          for (const chat of chatData) {\n            // Construct the URL for messages in the chat\n            const chatMessagesUrl = `http://localhost:8080/message/${chat._id}`;\n  \n            // Fetch message data for the chat\n            const messageResponse = await axios.get(chatMessagesUrl, config);\n            console.log(`this is messageResponse`,messageResponse)\n            const messageData = messageResponse.data;\n            console.log(\"this is messageData\",messageData)\n            // console.log(\"this is messageData\",messageData)\n            // Check if there are messages in the chat\n            if (messageData.length > 0) {\n              // Add the chat to the array if it has messages\n              chatsWithLastMessages.push(chat);\n            }\n          }\n\n          console.log(\"this is chat with last messages:\",chatsWithLastMessages)\n          const usersNotMatchingId = chatsWithLastMessages.flatMap((chat) =>\n            chat.users.filter((user) => user._id !== userData.other._id)\n          );\n          // Set the chats with last messages in the state\n          setWithoutSearchRslt(usersNotMatchingId);\n        } catch (error) {\n          console.error('Error fetching chats with last messages:', error);\n          setError('An error occurred while fetching chats.');\n        }\n      };\n  \n      // Call the function to fetch chats with last messages\n      fetchChatsWithLastMessages();\n    }\n  }, [search, userData.accessToken, setWithoutSearchRslt]);\n  return (\n    \n    <div className='chatpage'>\n      {\n          profileCheck && (\n            <div className=\"checkUserProfile\" onClick={()=> setProfileCheck(false)}>\n              <div className='checkUserProfileContainer'>\n                <div className='checkUserProfilePic'>\n                  <img src={otherUser.pic} alt=\"\" />\n                </div>\n                <div className='checkUserProfileName'>\n                  <h2>{otherUser.username}</h2>\n                </div>\n                <div className='checkUserProfileEmail'>\n                  <p>{otherUser.email}</p>\n                </div>\n              </div>\n            </div>\n          )\n        }\n\n        {\n          logedUserProfilecheck && (\n            <div className=\"checkUserProfile\" onClick={handleLogedProfile}>\n              <div className='checkUserProfileContainer'>\n                <div className='checkUserProfilePic'>\n                  <img src={userData.other.pic} alt=\"\" />\n                </div>\n                <div className='checkUserProfileName'>\n                  <h2>{userData.other.username}</h2>\n                </div>\n                <div className='checkUserProfileEmail'>\n                  <p>{userData.other.email}</p>\n                </div>\n              </div>\n            </div>\n          )\n        }\n      <div className='chat-container'>\n        \n        \n        <div className='chat-right'>\n          <div className='right-container'>\n            <div className='right-container-navbar'>\n              <div className='nav-container'>\n                <div className='profile'>\n                  <div className='nav-profile-pic'>\n                    <img src={userData.other.pic} alt=\"default\" />\n                  </div>\n                </div>\n                <div className='group-others'>\n                  <div className='group-icons'>\n                    <GroupsIcon className =\"grpicons\"/>\n                    <MoreVertIcon className='grpicons' onClick={()=> setdropDown(!dropDown)}/>\n                    {\n                      dropDown && (\n                        <div className='dropdown'>\n                          <div className='dropBtn' onClick={()=>setLogedUserProfilecheck(true)}>\n                            My Profile\n                          </div>\n                          <div className='dropBtn' onClick={()=>handleLogout(personChat,setPersonChat)}>\n                            Log out\n                          </div>\n                        </div>\n                      )\n                    }\n                    \n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className='right-search-box'>\n                {error && <p className=\"error-message\">{error}</p>}\n                <div className='search-container'>\n                  <SearchIcon className='search-icon'/>\n                  <input type=\"text\" value={search} onChange={(e) => setSearch(e.target.value)}\n                    onKeyPress={handleSearchKeyPress}\n                  />\n                  <button className='search-user-button' onClick={handleUsers}>Go</button>\n                </div>\n            </div>\n            <div className='right-container-user-list'>\n              <div className='list-container'>\n                    {console.log(\"withoutSaerchRslt\",withoutSaerchRslt)}\n                  {\n                    loding ? (\n                      <div>Loding</div>\n                    ): (\n                      <div className='user-list-container'>\n                        <div className='user-list-item'>\n                          {\n                            !search ? (\n                              withoutSaerchRslt.map((item, i) => (\n                              \n                                <div className='user-item' key={i} onClick={() => accessChat(item._id)}>\n                                <div className='user-item-profile'>\n                                  <div className='item-profile-pic'>\n                                    <img src={item.pic} alt=\"default\" />\n                                  </div>\n                                </div>\n                                <div className='user-item-data'>\n                                  <div className='user-item-identity'>\n                                    <h3>{item.username}</h3>\n                                    \n                                  </div>\n                                  <div className='lattest-msg'>\n                                    <p>you: this is you messages</p>\n                                  </div>\n                                </div>\n                              </div>\n                              ))\n                            ):(\n                              searchResult.map((item,i)=> {\n                                return (<>\n                                <div className='user-item' key={i} onClick={() => accessChat(item._id)}>\n                                  <div className='user-item-profile'>\n                                    <div className='item-profile-pic'>\n                                      <img src={item.pic} alt=\"default\" />\n                                    </div>\n                                  </div>\n                                  <div className='user-item-data'>\n                                    <div className='user-item-identity'>\n                                      <h3>{item.username}</h3>\n                                    </div>\n                                    <div className='lattest-msg'>\n                                      <p>you: this is you messages</p>\n                                    </div>\n                                  </div>\n                                </div>\n                                  \n                                </>\n                                )\n                              })\n                            )\n\n                          }\n                        \n                          \n                        \n                        </div>\n                      </div>\n                      \n                    )\n                  }\n                  \n                  \n                \n              </div>\n            </div>\n            \n          </div>\n        </div>\n\n\n        <div className='chat-container-left'>\n          {\n            personChat ? <MyChat userData={userData} selectedChat={selectedChat} setSelectedChat={setSelectedChat}  socket={socket} chatId={selectedChat._id} user={otherUser} handleProfile={handleProfile} profileCheck={profileCheck}/> :(\n              <div className='whatsapp-home'>\n                <div className='home-container'>\n                  <div className='home-container-box'>\n                    <div className='home-container-icon'>\n                      <WhatsAppIcon className='icon'/>\n                    </div>\n                    <div className='home-container-para'>\n                      <div>\n                        <h1>WhatsApp Web</h1>\n                      </div>\n                      <div className=\"home-whatsapp-title\">Send and receive messages without keeping your phone online.<br/>Use WhatsApp on up to 4 linked devices and 1 phone at the same time.</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )\n          }\n          \n        </div>  \n      </div>      \n    </div>\n  )\n}\n\nexport default ChatPage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}